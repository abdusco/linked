<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>link·ed</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="/static/style.css">
	<script defer src="/static/alpine.min.js"></script>
</head>
<body>
	<div class="container" x-data="app()" x-init="init()">
		<div class="header">
			<h1>link·ed</h1>
			<p>Create and manage your shortened links</p>
		</div>

		<div class="form-card">
			<form @submit.prevent="createLink()" x-data="{ url: '', slug: '' }">
				<div x-show="message.text" :class="message.type === 'success' ? 'alert-success' : 'alert-error'" class="alert">
					<span x-text="message.text"></span>
				</div>

				<div class="form-group">
					<div class="form-field">
						<label for="url">URL</label>
						<input type="url" id="url" x-model="url" placeholder="https://example.com" required>
					</div>
					<div class="form-field">
						<label for="slug">Custom Slug (optional)</label>
						<input type="text" id="slug" x-model="slug" placeholder="e.g. my-link">
					</div>
					<button type="submit" class="submit-btn" :disabled="loading">
						<span x-text="loading ? 'Creating...' : 'Create Link'"></span>
					</button>
				</div>
			</form>
		</div>

		<div class="links-card">
			<h2>Your Links</h2>
			<div x-show="loading && links.length === 0" class="loading">Loading links...</div>
			<div x-show="!loading && links.length === 0" class="empty-state">
				<p>No links yet. Create your first link above!</p>
			</div>
			<div x-show="links.length > 0" class="table-responsive">
				<table>
					<thead>
						<tr>
							<th>Slug</th>
							<th>Link</th>
							<th>Total Clicks</th>
							<th>Last Clicked</th>
						</tr>
					</thead>
					<tbody>
						<template x-for="link in links" :key="link.id">
							<tr>
								<td data-label="Slug"><span class="slug-badge" x-text="link.slug"></span></td>
								<td data-label="Link"><span class="url-text" :title="link.url" x-text="link.url"></span></td>
								<td data-label="Total Clicks" x-text="link.clicks || 0"></td>
								<td data-label="Last Clicked" x-text="link.last_clicked_at ? formatDate(link.last_clicked_at) : '-'"></td>
							</tr>
						</template>
					</tbody>
				</table>
			</div>
		</div>
	</div>

	<script src="/static/app.js"></script>
</body>
</html>

